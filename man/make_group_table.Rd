% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_group_table.R
\name{make_group_table}
\alias{make_group_table}
\title{Summarise binary variables across groups}
\usage{
make_group_table(
  data,
  group_col = group,
  exclude = NULL,
  na_mode = c("exclude", "include"),
  include_missing = TRUE,
  digits = 1,
  group_order = NULL,
  group_labels = NULL
)
}
\arguments{
\item{data}{A data frame with one row per subject.}

\item{group_col}{Bare column name of the grouping variable.
Can be numeric, character, or factor with any number of levels.}

\item{exclude}{Optional character vector of column names to drop before
selecting binary variables.}

\item{na_mode}{One of \code{"exclude"} (default) or \code{"include"}.
If \code{"exclude"}, denominators exclude missing values (typical
epidemiology convention). If \code{"include"}, denominators use all rows
in the group, including missing values.}

\item{include_missing}{Logical, default \code{TRUE}. If \code{TRUE}, a
separate "— Missing" row is added for each variable, showing the number
and percentage of \code{NA} values in each group and overall.}

\item{digits}{Integer, number of decimal places for percentages. Default 1.}

\item{group_order}{Optional vector giving the desired order of groups in
the output (e.g. \code{c("control","treatment")}).
If \code{NULL}, factor levels are respected (if \code{group_col} is a
factor), otherwise natural sort of unique values is used.}

\item{group_labels}{Optional named character vector mapping raw group
values to pretty column labels. Names should match the raw group values,
values are the desired labels. Unmapped groups keep their raw name.}
}
\value{
A tibble with one row per variable (plus optional "— Missing" rows)
and one column per group, plus a "Total" column. Each cell contains a
string formatted as \code{"N/total (xx.x\%)"}.
}
\description{
Create a descriptive table of binary variables stratified by a grouping
variable (which can have 2 or more levels). For each variable, the function
reports counts, denominators, and percentages in the format
\code{"N/total (xx.x\%)"}. An overall "Total" column is always added.
}
\details{
Binary variables are detected automatically: a column is considered binary if
its non-missing unique values can be coerced to 0/1. Supported storage types
include numeric, logical, factor, and character.
}
\examples{
set.seed(1)
df <- data.frame(
  group = factor(sample(c("NS", "SI", "SA"), 100, TRUE)),
  diabete = rbinom(100, 1, 0.2),
  hta = rbinom(100, 1, 0.3),
  cancer = sample(c(0, 1, NA), 100, TRUE, prob = c(0.8, 0.15, 0.05))
)

# Default: exclude missing from denominator, include "Missing" rows
make_group_table(df, group_col = group)

# Include NA in denominator, custom order and labels
make_group_table(
  df,
  group_col = group,
  na_mode = "include",
  group_order = c("NS", "SI", "SA"),
  group_labels = c(NS = "non_suicidaires", SI = "suicidaires_I", SA = "suicidaires_A")
)

}
